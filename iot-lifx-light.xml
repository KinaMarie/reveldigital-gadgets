<?xml version="1.0" encoding="UTF-8" ?> 
<Module> 
<ModulePrefs title="Lifx Light Control" description="" author="RevelDigital" background="transparent">
  <UserPref name="ForeColor" datatype="hidden" />
  <UserPref name="BackColor" datatype="hidden" />
  <UserPref name="rdW" display_name="Width" required="true" default_value="280" datatype="hidden" />
  <UserPref name="rdH" display_name="Height" required="true" default_value="190" datatype="hidden" />
</ModulePrefs>
<Content type="html">
<![CDATA[

<style type="text/css">
body *
{
  line-height: 1.2em; 
  letter-spacing: 0; 
  word-spacing: normal;
}

body
{
  background: transparent;
  width: __UP_rdW__px;
  height: __UP_rdH__px;
  overflow: hidden;
}

.bluebtn {
  background: #3498db;
  background-image: -webkit-linear-gradient(top, #3498db, #2980b9);
  background-image: -moz-linear-gradient(top, #3498db, #2980b9);
  background-image: -ms-linear-gradient(top, #3498db, #2980b9);
  background-image: -o-linear-gradient(top, #3498db, #2980b9);
  background-image: linear-gradient(to bottom, #3498db, #2980b9);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  color: #ffffff;
  font-size: 20px;
  padding: 10px 20px 10px 20px;
  text-decoration: none;
}

.bluebtn:hover {
  background: #3cb0fd;
  background-image: -webkit-linear-gradient(top, #3cb0fd, #3498db);
  background-image: -moz-linear-gradient(top, #3cb0fd, #3498db);
  background-image: -ms-linear-gradient(top, #3cb0fd, #3498db);
  background-image: -o-linear-gradient(top, #3cb0fd, #3498db);
  background-image: linear-gradient(to bottom, #3cb0fd, #3498db);
  text-decoration: none;
}
  
.redbtn {
  background: #ff0000;
  background-image: -webkit-linear-gradient(top, #ff0000, #b32e2e);
  background-image: -moz-linear-gradient(top, #ff0000, #b32e2e);
  background-image: -ms-linear-gradient(top, #ff0000, #b32e2e);
  background-image: -o-linear-gradient(top, #ff0000, #b32e2e);
  background-image: linear-gradient(to bottom, #ff0000, #b32e2e);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  color: #ffffff;
  font-size: 20px;
  padding: 10px 20px 10px 20px;
  text-decoration: none;
}

.redbtn:hover {
  background: #ff0000;
  text-decoration: none;
}

</style>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<div class="container">
  <a id="red" class="redbtn">Red</a>
  <a id="blue" class="bluebtn">Blue</a>
</div>

<script type="text/javascript">

  var prefs = new gadgets.Prefs();

  function load() {
  }

  gadgets.util.registerOnLoadHandler(load);
</script>

<script type="text/javascript">
  function makeRequest(req) {
    $.ajax({
      url: "https://api.lifx.com/v1/lights/all/state",
      method: "PUT",
      contentType:"application/json; charset=utf-8",
      dataType:"json",
      data: JSON.stringify(req),
      beforeSend: function( xhr ) {
        xhr.setRequestHeader("Authorization", "Bearer c3f6eba228a3863bcefb6b4394a756e1f56d4d9e88a5886636b5e74f552452b1");
      }
    }).done(function( data ) {
      if ( console && console.log ) {
        console.log( "Sample of data:", data );
      }
    });
  }

  function changeColor(color) {
    makeRequest({
      power: "on",
      color: color + " saturation:1.0",
      brightness: 1,
      duration: 2
    });
  }

  $(document).ready(function() {
    $("#red").click(function() {
      changeColor("red");
    });

    $("#blue").click(function() {
      changeColor("blue");
    });
  });
</script>
]]>
</Content>
</Module>