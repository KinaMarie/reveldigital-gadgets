<?xml version="1.0" encoding="UTF-8" ?> 
<Module> 
<ModulePrefs title="RevelDigital Menu/Pricelist Gadget" description="Basic Gadget to display a menu or a pricelist. Gets data from a Google Spreadsheet" author="RevelDigital" background="transparent">
  <UserPref name="spreadsheetUrl" display_name="Published spreadsheet URL" datatype="string" />
  <UserPref name="column1-style" display_name="Column 1 Style" datatype="style" default_value="font-family:Verdana;color:rgb(0, 0, 0);font-size:18px;" required="true" />
  <UserPref name="column2-style" display_name="Column 2 Style" datatype="style" default_value="font-family:Verdana;color:rgb(0, 0, 0);font-size:18px;" required="true" />
  <UserPref name="column34-style" display_name="Column 3 and 4 Style" datatype="style" default_value="font-family:Verdana;color:rgb(0, 0, 0);font-size:15px;" required="true" />
  <UserPref name="entryPadding" display_name="Space between entries in pixels" required="true" default_value="10" datatype="string" />
</ModulePrefs>
<Content type="html">
<![CDATA[
<style type="text/css">

	body {
		background: transparent;
		overflow: hidden;
	}
  
	.dotted {
		max-width: 100%;
	}
	ul.dotted li, ul.dotted div {
		height: inherit;
		list-style-type: none;
	}

	ul.dotted > li div {
		float: left;
		width: 50%;
		position: relative;
		overflow: hidden;
	}

	.dotted div.column1 {
		width: 80%;
	}

	.dotted div.column2 {
		width: 20%;
		overflow: visible;
	}

	.dotted div.column1, .dotted div.column2 {
		height: 1em;
		font-weight: bold;
	}

	ul.dotted span {
		display: block;
		position: absolute;
		padding: 0 5px;
	}

	
	ul.dotted span:after {
		content: "";
		display: block;
		position: absolute;
		top: 67%;
		width: 2000px; 
		border-top: 2px dotted #000;
	}
	

	div.column1 span {
	
		left: 0;
	}

	div.column1 span:after {
	
		left: 100%;
	}

	div.column2 span {
	
		right: 0;
		width: 80%;
	}

	div.column2 div {
		width: 100% !important;
	}

	div.column2 span:after {
	
		right: 100%;
	}
	ul.dotted p {
	
		padding: 0px 10px 0px;
		clear: both;
		margin-bottom: 0;
	}
	
	.column1 {
		__UP_column1-style__
	}
	
	.column2 {
		__UP_column2-style__
	}
	
	.column34 {
		__UP_column34-style__
	}
	
	singleEntry {
		padding: __UP_entryPadding__px;
	}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://reveldigital.github.io/reveldigital-gadgets/third-party/tabletop.js" type="text/javascript"></script>

<body>
	<ul id="menuContainer" class="dotted"></ul>
</body>

<script type="text/javascript">
		var prefs = new gadgets.Prefs();
		var public_spreadsheet_url = prefs.getString("spreadsheetUrl");
		
		function init() {
			Tabletop.init( { key: public_spreadsheet_url,
							 callback: processData,
							 simpleSheet: true } )
		}
		  
		gadgets.util.registerOnLoadHandler(init);
		  
		function processData(data, tabletop) {
			for (i = 0; i < data.length; i++) { 
				console.log(data[i]);
				var menu = $('#menuContainer');
				menu.append("<li class='singleEntry'><div class='column1'><span>" + data[i].column1 + "</span></div>" + "<div class='column2'><div><span>" 
				+ data[i].column2 + "</span></div></div>" + "<p class='column34'>" + data[i].column3 + "<br/>" + data[i].column4 + "</p></li>");
			}
		}
</script>]]>
</Content>
</Module>