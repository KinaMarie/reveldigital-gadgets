<?xml version="1.0" encoding="UTF-8" ?> 
<Module> 
<ModulePrefs title="RevelDigital Menu Gadget" description="Basic Gadget to display a menu. Gets data from a Google Spreadsheet" author="RevelDigital" background="transparent">
  <UserPref name="spreadsheetUrl" display_name="Published spreadsheet URL" datatype="string" />
  <UserPref name="header-style" display_name="Header Style" datatype="style" default_value="font-family:Verdana;color:rgb(255, 255, 255);font-size:24px;" required="true" />
  <UserPref name="dishname-style" display_name="Dish Name Style" datatype="style" default_value="font-family:Verdana;color:rgb(255, 255, 255);font-size:18px;" required="true" />
  <UserPref name="dishprice-style" display_name="Price Style" datatype="style" default_value="font-family:Verdana;color:rgb(255, 255, 255);font-size:18px;" required="true" />
  <UserPref name="subentry-style" display_name="Description Style" datatype="style" default_value="font-family:Verdana;color:rgb(255, 255, 255);font-size:15px;" required="true" />
  <UserPref name="gadgetWidth" display_name="Width" required="true" default_value="540" datatype="hidden" />
  <UserPref name="gadgetHeight" display_name="Height" required="true" default_value="800" datatype="hidden" />
</ModulePrefs>
<Content type="html">
<![CDATA[
<style type="text/css">


	.dotted {
		width: __UP_gadgetWidth__px;
		max-width: 100%;
	}
	ul.dotted li, ul.dotted div {
		height: inherit;
		list-style-type: none;
	}

	ul.dotted > li div {
		float: left;
		width: 50%;
		position: relative;
		overflow: hidden;
	}

	.dotted div.menuItem {
		width: 80%;
	}

	.dotted div.menuPrice {
		width: 20%;
		overflow: visible;
	}

	.dotted div.menuItem, .dotted div.menuPrice {
		height: 1em;
		font-weight: bold;
	}

	ul.dotted span {
		display: block;
		position: absolute;
		padding: 0 5px;
	}

	
	ul.dotted span:after {
		content: "";
		display: block;
		position: absolute;
		top: 67%;
		width: 2000px; 
		border-top: 2px dotted #000;
	}
	

	div.menuItem span {
	
		left: 0;
	}

	div.menuItem span:after {
	
		left: 100%;
	}

	div.menuPrice span {
	
		right: 0;
		width: 80%;
	}

	div.menuPrice div {
	
		width: 100% !important;
	}

	div.menuPrice span:after {
	
		right: 100%;
	}
	ul.dotted p {
	
		padding: 0px 10px 0px;
		clear: both;
		margin-bottom: 0;
	}
	
	.dishName {
		<!-- __UP_dishname-style__ -->
	}
	
	.dishPrice {
		<!-- __UP_dishprice-style__ -->
	}
	
	.subEntry {
	color: black;
		<!-- __UP_subentry-style__ -->
	}
	
	.menuHeader {
		float: left;width:50%;
		<!-- __UP_header-style__ -->
	}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://reveldigital.github.io/reveldigital-gadgets/third-party/tabletop.js" type="text/javascript"></script>

<body>
	<h1 align="center" class="menuHeader">MENU</h1>
	<ul id="menuContainer" class="dotted"></ul>
</body>

<script type="text/javascript">
		var prefs = new gadgets.Prefs();
		var public_spreadsheet_url = prefs.getString("spreadsheetUrl");
		
		function init() {
			Tabletop.init( { key: public_spreadsheet_url,
							 callback: processData,
							 simpleSheet: true } )
		}
		  
		gadgets.util.registerOnLoadHandler(init);
		  
		function processData(data, tabletop) {
			for (i = 0; i < data.length; i++) { 
				console.log(data[i]);
				var menu = $('#menuContainer');
				menu.append("<li><div class='menuItem'><span>" + data[i].dish + "</span></div>" + "<div class='menuPrice'><div><span>" 
				+ data[i].price + "</span></div></div>" + "<p class='subEntry'>" + data[i].desc1 + "<br/>" + data[i].desc2 + "</p></li>");
			}
		}
</script>]]>
</Content>
</Module>